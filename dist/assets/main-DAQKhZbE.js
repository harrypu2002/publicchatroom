import{c as I,o as X,q,a as O,w as L,T as Y,b as $,d as E}from"./main-DxhxEm6S.js";import{t as h,n as w,g as b,a as U,e as F,m as C,b as M}from"./en-US-CHgBOXzu.js";/* empty css                */function H(t,n){let e=t,r=n;const s=I(E,"chats");let u=null;return{addChat:async c=>{const g=new Date,a={username:r,room:e,message:c,created_at:Y.fromDate(g)};try{return await $(s,a)}catch(l){throw console.log("Error addchat = ",l),l}},getChats:c=>{u&&u(),u=X(q(s,L("room","==",e),O("created_at")),g=>{g.docChanges().forEach(a=>{a.type==="added"&&c(a.doc.data())})}),console.log(u)},updateChatroom:c=>{e=c,console.log(`Room Changed to ${e}`)},updateUsername:c=>{r=c,localStorage.setItem("username",r),console.log(`Username changed to ${r}`)}}}function y(t,n){const e=+h(t)-+h(n);return e<0?-1:e>0?1:e}function R(t,n,e){const[r,s]=w(e?.in,t,n),u=r.getFullYear()-s.getFullYear(),i=r.getMonth()-s.getMonth();return u*12+i}function N(t){return n=>{const r=(t?Math[t]:Math.trunc)(n);return r===0?0:r}}function z(t,n){return+h(t)-+h(n)}function A(t,n){const e=h(t,n?.in);return e.setHours(23,59,59,999),e}function j(t,n){const e=h(t,n?.in),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function k(t,n){const e=h(t,n?.in);return+A(e,n)==+j(e,n)}function G(t,n,e){const[r,s,u]=w(e?.in,t,t,n),i=y(s,u),o=Math.abs(R(s,u));if(o<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-i*o);let m=y(s,u)===-i;k(r)&&o===1&&y(r,u)===1&&(m=!1);const d=i*(o-+m);return d===0?0:d}function B(t,n,e){const r=z(t,n)/1e3;return N(e?.roundingMethod)(r)}function J(t,n,e){const r=U(),s=e?.locale??r.locale??F,u=2520,i=y(t,n);if(isNaN(i))throw new RangeError("Invalid time value");const o=Object.assign({},e,{addSuffix:e?.addSuffix,comparison:i}),[m,d]=w(e?.in,...i>0?[n,t]:[t,n]),c=B(d,m),g=(b(d)-b(m))/1e3,a=Math.round((c-g)/60);let l;if(a<2)return e?.includeSeconds?c<5?s.formatDistance("lessThanXSeconds",5,o):c<10?s.formatDistance("lessThanXSeconds",10,o):c<20?s.formatDistance("lessThanXSeconds",20,o):c<40?s.formatDistance("halfAMinute",0,o):c<60?s.formatDistance("lessThanXMinutes",1,o):s.formatDistance("xMinutes",1,o):a===0?s.formatDistance("lessThanXMinutes",1,o):s.formatDistance("xMinutes",a,o);if(a<45)return s.formatDistance("xMinutes",a,o);if(a<90)return s.formatDistance("aboutXHours",1,o);if(a<C){const f=Math.round(a/60);return s.formatDistance("aboutXHours",f,o)}else{if(a<u)return s.formatDistance("xDays",1,o);if(a<M){const f=Math.round(a/C);return s.formatDistance("xDays",f,o)}else if(a<M*2)return l=Math.round(a/M),s.formatDistance("aboutXMonths",l,o)}if(l=G(d,m),l<12){const f=Math.round(a/M);return s.formatDistance("xMonths",f,o)}else{const f=l%12,x=Math.trunc(l/12);return f<3?s.formatDistance("aboutXYears",x,o):f<9?s.formatDistance("overXYears",x,o):s.formatDistance("almostXYears",x+1,o)}}function K(t){return{newli:e=>{const r=J(e.created_at.toDate(),new Date,{addSuffix:!0}),s=`
            <li class="shadow rounded-lg px-4 py-2" >
                <div class="flex justify-between" >
                    <h5 class="text-gray-600 font-medium text-sm" >${e.username}</h5>
                    <i class="text-gray-300 text-xs" >${r}</i>
                </div>
                <p class="text-gray-600 text-sm" >${e.message}</p>
            </li>
        `;t.innerHTML+=s}}}const P=document.querySelector(".chatrooms"),Q=document.querySelector(".chat-ul"),S=document.querySelector(".chat-form"),D=document.querySelector(".user-form"),T=document.querySelector(".msg"),v=document.querySelector(".roomtitle"),_=localStorage.username?localStorage.username:"Guest";D.username.placeholder=`Username is ${_}`;const p=H("general",_);v.textContent="General";S.addEventListener("submit",function(t){t.preventDefault();const n=S.message.value.trim();p.addChat(n).then(()=>S.reset()).catch(e=>{console.log(e)})});D.addEventListener("submit",function(t){t.preventDefault();const n=D.username.value.trim();p.updateUsername(n),D.reset(),T.innerText=`New name updated to ${n}`,D.username.placeholder=`username is ${n}`,setTimeout(()=>T.innerText="",3e3)});P.addEventListener("click",function(t){t.preventDefault();const n=t.target.closest("button");if(n){const e=n.id,r=n.querySelector("h3").innerText;v.textContent=r,p.updateChatroom(e)}});const V=K(Q);p.getChats(t=>{V.newli(t)});
